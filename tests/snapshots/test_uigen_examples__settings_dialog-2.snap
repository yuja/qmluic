---
source: tests/test_uigen_examples.rs
expression: ui_support_h
---
#pragma once
#include "ui_settingsdialog.h"

namespace UiSupport {
class SettingsDialog
{
public:
    SettingsDialog(QDialog *root, Ui::SettingsDialog *ui): root_(root), ui_(ui) {}

    void setup()
    {
        this->setupLabel6Alignment();
        this->setupLabel6Font();
        this->setupLabel7Font();
        this->setupButtonBoxAccepted();
        this->setupButtonBoxRejected();
        this->updateLabel6Alignment();
        this->updateLabel6Font();
        this->updateLabel7Font();
    }

private:
    enum class BindingIndex : unsigned {
        Label6Alignment,
        Label6Font,
        Label7Font,
    };

    void setupLabel6Alignment()
    {
        QObject::connect(this->ui_->textAlignmentEdit, &QComboBox::currentIndexChanged, this->root_, [this]() { this->updateLabel6Alignment(); });
    }

    void updateLabel6Alignment()
    {
#ifndef QT_NO_DEBUG
        constexpr unsigned index = static_cast<unsigned>(BindingIndex::Label6Alignment);
        Q_ASSERT_X(!(this->bindingGuard_[index >> 5] & (1U << (index & 0x1f))), __func__, "binding loop detected");
        this->bindingGuard_[index >> 5] |= (1U << (index & 0x1f));
#endif
        this->ui_->label6->setAlignment(this->evalLabel6Alignment());
#ifndef QT_NO_DEBUG
        this->bindingGuard_[index >> 5] &= ~(1U << (index & 0x1f));
#endif
    }

    Qt::Alignment evalLabel6Alignment()
    {
        int a0;
        bool a1;
        bool a2;
        bool a3;
        bool a4;
    b0:
        a0 = this->ui_->textAlignmentEdit->currentIndex();
        goto b2;
    b1:
        Q_UNREACHABLE();
    b2:
        a1 = a0 == 0;
        if (a1)
            goto b3;
        else
            goto b5;
    b3:
        return Qt::AlignLeft;
    b4:
        goto b6;
    b5:
        a2 = a0 == 1;
        if (a2)
            goto b6;
        else
            goto b8;
    b6:
        return Qt::AlignRight;
    b7:
        goto b9;
    b8:
        a3 = a0 == 2;
        if (a3)
            goto b9;
        else
            goto b11;
    b9:
        return Qt::AlignHCenter;
    b10:
        goto b12;
    b11:
        a4 = a0 == 3;
        if (a4)
            goto b12;
        else
            goto b14;
    b12:
        return Qt::AlignJustify;
    b13:
        goto b14;
    b14:
        return Qt::AlignLeft;
    b15:
        Q_UNREACHABLE();
    b16:
        Q_UNREACHABLE();
    }

    void setupLabel6Font()
    {
        QObject::connect(this->ui_->textFontRadio, &QAbstractButton::toggled, this->root_, [this]() { this->updateLabel6Font(); });
    }

    void updateLabel6Font()
    {
#ifndef QT_NO_DEBUG
        constexpr unsigned index = static_cast<unsigned>(BindingIndex::Label6Font);
        Q_ASSERT_X(!(this->bindingGuard_[index >> 5] & (1U << (index & 0x1f))), __func__, "binding loop detected");
        this->bindingGuard_[index >> 5] |= (1U << (index & 0x1f));
#endif
        this->ui_->label6->setFont(this->evalLabel6Font());
#ifndef QT_NO_DEBUG
        this->bindingGuard_[index >> 5] &= ~(1U << (index & 0x1f));
#endif
    }

    QFont evalLabel6Font()
    {
        auto &observed = observedLabel6Font_;
        const auto update = [this]() { this->updateLabel6Font(); };
        bool a0;
        QFontComboBox* a1;
        QFontComboBox* a2;
        bool a3;
        QSpinBox* a4;
        QSpinBox* a5;
        QFont a6;
        QFont a7;
        int a8;
    b0:
        a0 = this->ui_->textFontRadio->isChecked();
        if (a0)
            goto b1;
        else
            goto b2;
    b1:
        a1 = this->ui_->textFontFamilyEdit;
        goto b3;
    b2:
        a1 = this->ui_->altFontFamilyEdit;
        goto b3;
    b3:
        a2 = a1;
        a3 = this->ui_->textFontRadio->isChecked();
        if (a3)
            goto b4;
        else
            goto b5;
    b4:
        a4 = this->ui_->textFontSizeEdit;
        goto b6;
    b5:
        a4 = this->ui_->altFontSizeEdit;
        goto b6;
    b6:
        a5 = a4;
        if (Q_UNLIKELY(!observed[0].connection || observed[0].object != a2)) {
            QObject::disconnect(observed[0].connection);
            if (a2) {
                observed[0].connection = QObject::connect(a2, &QFontComboBox::currentFontChanged, this->root_, update);
            }
            observed[0].object = a2;
        }
        a6 = a2->currentFont();
        a7 = a6;
        if (Q_UNLIKELY(!observed[1].connection || observed[1].object != a5)) {
            QObject::disconnect(observed[1].connection);
            if (a5) {
                observed[1].connection = QObject::connect(a5, &QSpinBox::valueChanged, this->root_, update);
            }
            observed[1].object = a5;
        }
        a8 = a5->value();
        a7.setPointSize(a8);
        return a7;
    b7:
        Q_UNREACHABLE();
    }

    void setupLabel7Font()
    {
        QObject::connect(this->ui_->textFontRadio, &QAbstractButton::toggled, this->root_, [this]() { this->updateLabel7Font(); });
    }

    void updateLabel7Font()
    {
#ifndef QT_NO_DEBUG
        constexpr unsigned index = static_cast<unsigned>(BindingIndex::Label7Font);
        Q_ASSERT_X(!(this->bindingGuard_[index >> 5] & (1U << (index & 0x1f))), __func__, "binding loop detected");
        this->bindingGuard_[index >> 5] |= (1U << (index & 0x1f));
#endif
        this->ui_->label7->setFont(this->evalLabel7Font(this->ui_->label7->font()));
#ifndef QT_NO_DEBUG
        this->bindingGuard_[index >> 5] &= ~(1U << (index & 0x1f));
#endif
    }

    QFont evalLabel7Font(QFont a)
    {
        a.setFamily(this->evalLabel7FontFamily());
        a.setPointSize(this->evalLabel7FontPointSize());
        return a;
    }

    QString evalLabel7FontFamily()
    {
        auto &observed = observedLabel7FontFamily_;
        const auto update = [this]() { this->updateLabel7Font(); };
        bool a0;
        QFontComboBox* a1;
        QFont a2;
        QString a3;
    b0:
        a0 = this->ui_->textFontRadio->isChecked();
        if (a0)
            goto b1;
        else
            goto b2;
    b1:
        a1 = this->ui_->textFontFamilyEdit;
        goto b3;
    b2:
        a1 = this->ui_->altFontFamilyEdit;
        goto b3;
    b3:
        if (Q_UNLIKELY(!observed[0].connection || observed[0].object != a1)) {
            QObject::disconnect(observed[0].connection);
            if (a1) {
                observed[0].connection = QObject::connect(a1, &QFontComboBox::currentFontChanged, this->root_, update);
            }
            observed[0].object = a1;
        }
        a2 = a1->currentFont();
        a3 = a2.family();
        return a3;
    }

    int evalLabel7FontPointSize()
    {
        auto &observed = observedLabel7FontPointSize_;
        const auto update = [this]() { this->updateLabel7Font(); };
        bool a0;
        QSpinBox* a1;
        int a2;
    b0:
        a0 = this->ui_->textFontRadio->isChecked();
        if (a0)
            goto b1;
        else
            goto b2;
    b1:
        a1 = this->ui_->textFontSizeEdit;
        goto b3;
    b2:
        a1 = this->ui_->altFontSizeEdit;
        goto b3;
    b3:
        if (Q_UNLIKELY(!observed[0].connection || observed[0].object != a1)) {
            QObject::disconnect(observed[0].connection);
            if (a1) {
                observed[0].connection = QObject::connect(a1, &QSpinBox::valueChanged, this->root_, update);
            }
            observed[0].object = a1;
        }
        a2 = a1->value();
        return a2;
    }

    void setupButtonBoxAccepted()
    {
        QObject::connect(this->ui_->buttonBox, &QDialogButtonBox::accepted, this->root_, [this]() { this->onButtonBoxAccepted(); });
    }

    void onButtonBoxAccepted()
    {
    b0:
        this->root_->accept();
        return;
    }

    void setupButtonBoxRejected()
    {
        QObject::connect(this->ui_->buttonBox, &QDialogButtonBox::rejected, this->root_, [this]() { this->onButtonBoxRejected(); });
    }

    void onButtonBoxRejected()
    {
    b0:
        this->root_->reject();
        return;
    }

    struct PropertyObserver
    {
        QMetaObject::Connection connection;
        QObject *object = nullptr;
    };

    QDialog *const root_;
    Ui::SettingsDialog *const ui_;
    PropertyObserver observedLabel6Font_[2];
    PropertyObserver observedLabel7FontFamily_[1];
    PropertyObserver observedLabel7FontPointSize_[1];
#ifndef QT_NO_DEBUG
    quint32 bindingGuard_[1] = {0};
#endif

};
} // namespace UiSupport

